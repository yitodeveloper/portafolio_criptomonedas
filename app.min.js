var subscribe=Cookies.getJSON("subscribeCrypto"),info={},tokenSelected="";function addCrypto(){var t=$("#crypto").val();t=t.toUpperCase(),void 0!==subscribe&&null!==subscribe||(subscribe=[]);var a=!1;if($.each(info,function(e,s){s.symbol==t&&(a=!0)}),!a)return $(".statusText").html("<span class='text-danger'>¡Moneda "+t+" no encontrada!</span>"),void $(".statusText").fadeIn();-1===$.inArray(t,subscribe)&&(subscribe.push(t),Cookies.set("subscribeCrypto",subscribe),getData())}function deleteCard(t){$(".statusText").html("Eliminando "+t+" de la lista"),subscribe.splice($.inArray(t,subscribe),1),Cookies.set("subscribeCrypto",subscribe),$(".cardcrypto-"+t).remove(),drawCards()}function getData(){$(".statusText").html("Actualizando ...").fadeIn(),$.ajax({url:"https://api.coinmarketcap.com/v1/ticker/?convert=CLP&limit=0",type:"GET",dataType:"json",data:{},success:function(t){info=t,$(".statusText").fadeOut("slow"),drawCards()},error:{}})}function drawCards(){$(".resumen").html("");var t=0;$.each(info,function(a,e){if(-1!==$.inArray(e.symbol,subscribe)){var s=selfAmount(e.price_clp,e.symbol);t+=s;var o=$("<div>");o.addClass("cardcrypto-"+e.symbol),o.addClass("card col-12 col-sm-5 offset-sm-1 col-lg-3 mb-4");var n=$("<div>");n.addClass("card-body");var i=$("<div class='row'></div>");i.append('<div class="col-4"><h5 class="card-title">'+e.symbol+' to CLP</h5><p class="card-subtitle">Mi '+e.name+" en Peso Chileno</p></div>"),i.append('<div class="col-8"><h2>$'+s.toLocaleString()+'</h2><p title="Equivalente a un Ethereum">Valor CLP: $'+Math.round(e.price_clp).toLocaleString()+" <br> Cambio 24h: "+writeChange24(e.percent_change_24h)+'</p><div class="row"><div class="col-6"><button class="btn btn-danger btn-sm" onclick="deleteCard(\''+e.symbol+'\')">Eliminar</button></div><div class="col-6"><button class="btn btn-primary btn-sm" onclick="editAmount(\''+e.symbol+"')\" >Editar</button></div></div></div>"),n.append(i),o.append(n),$(".resumen").append(o)}}),$("#total").html("$"+t.toLocaleString())}function editAmount(t){tokenSelected=t;var a=Cookies.get("amount-"+t);$("#inputAmount").val(a),$(".modal-title").html("¿Cuantos "+t+" tengo?"),$(".modal").modal("show")}function updateAmount(){var t=$("#inputAmount").val();Cookies.set("amount-"+tokenSelected,t),$(".modal").modal("hide"),drawCards()}function writeChange24(t){return t>=0?"<span class='text-success'>"+t+"%</span>":"<span class='text-danger'>"+t+"%</span>"}function selfAmount(t,a){var e=Cookies.get("amount-"+a);return void 0===e&&(e=0,Cookies.set("amount-"+a,0)),0!==e?Math.round(e*t):0}$(document).ready(function(){$(".formAdd").submit(function(t){t.preventDefault(),addCrypto()}),$("#updateAmount").click(function(){updateAmount()}),getData(),setInterval(function(){getData()},1e4)});